<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Sales Bill</title>
    <link rel="stylesheet" href="../css/bill.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Courier+New" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

</head>
<body style="background-color:whitesmoke;">
    <div class='card mx-auto rounded' style="width: 75%; height:100%; text-align:center; margin:30px; padding:20px; box-shadow: 1em 0em 1em 0.5em #ccc">

        <div class='row'>
            <div class="col" style="text-align: center;"> <h4 style="font-weight:bold;">GST Invoice</h4></div>
        </div>

        <div class='row align-items-end' style="margin-bottom: 0em;" >
            
            <div class="col float-left">
                <p class="float-left" style="margin-left: 50px; font-weight:bold; text-align:left; font-family:Courier New; font-size:22px;">
                    Champion Distributors<br/>
                    VIII/73, KALLUKKUDY,<br/>
                    KODANAD P.O,<br/>
                    ERNAKULAM - 683544<br/>
                    Phone: 9447226455
                </p>
            </div>
            
            <div class="col float-right" >
                <p class="float-right" style=" text-align:left; font-weight:bold; margin-right: 50px; font-family:Courier New; font-size:22px;">
                    GSTIN : 32BCCPR5741N12B<br/>
                    DL No1: KL-EKM-117304-20B<br/>
                    DL No2: KL-EKM-117305-21B
                </p>
            </div>
           
        </div>

        <hr style="border-top: 2px dashed #999;">
        
        <div class='row'>
            <div class="col" style="text-align: center;"> <p style="font-weight: bold; font-size: 20px;">CREDIT</p></div>
        </div>
        
        <div class="row" style="margin-bottom:0px">
            <div class="col float-left" style="margin-left: 50px; text-align:left;" >
                <div class="row">
                    <div class="col-1 float-left" style="text-align: left; width:fit-content">
                        <h5 style="margin-top: 20px; margin-right:0px; width:fit-content ">Doctor</h5>
                        <h5 style="margin-top: 20px; margin-right:0px; width:fit-content">Address</h5>
                    </div>
                    <div class="col float-left" style="margin-left: 70px;">
                        <h5 id="doctorName" style="margin-bottom:3px; width:fit-content;"></h5><br/>
                        <h5 id="doctorAddress" style="margin-top: 15px; margin-right:0px; width:fit-content">Address</h5>
                    </div>
                </div>
            </div>
                
            <div class="col float-right" style="margin-left:50px;">
                <div class="row" style="padding-left:25%">
                    <div class="col-1 float-left" style="text-align: left; width:fit-content">
                        <h5 style="margin-top: 20px; margin-right:0px; width:fit-content ">INVOICE</h5>
                        <h5 style="margin-top: 20px; margin-right:0px; width:fit-content">DATE</h5>
                        <h5 style="margin-top: 20px; margin-right:0px; width:fit-content">PAGE</h5>
                    </div>
                    <div class="col float-right" style="margin-left: 70px; text-align:left">
                        <h5 id="invoice_number" style="width: fit-content; text-align:left; margin-bottom:0px;"><br/>
                        <h5 id="dateField" style="margin-top: 15px; margin-right:0px; width:fit-content"></h5>
                        <h5 style="margin-top: 20px; margin-right:0px; width:fit-content">1</h5>
                    </div>
                </div>
                
            </div>
        </div>

        <div class="row" style="margin-bottom: 10px; margin-top:0px">
            <div class="col" style="text-align: left; margin-left:50px">
                <h4 style="font-weight:bold; font-family:Courier New;">
                    GST IN No : 32BCCPR5741N12B  DL No: KL-EKM-115546, KL-EKM-115546/2016
                </h4>
            </div>
        </div>

        <hr style="border-top: 2px dashed #999; margin-top:0;">

        <div class="row">
            <table id="billTable" class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">MFR</th>
                        <th scope="col">NAME</th>
                        <th scope="col">PACK</th>
                        <th scope="col">HSN</th>
                        <th scope="col">BATCH</th>
                        <th scope="col">EXP</th>
                        <th scope="col">QTY</th>
                        <th scope="col">FREE</th>
                        <th scope="col">RATE</th>
                        <th scope="col">MRP</th>
                        <th scope="col">CGST</th>
                        <th scope="col">SGST</th>
                        <th scope="col">AMNT</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    
                </tbody>   
            </table>
        </div>

        <hr style="border-top: 2px dashed #999; margin-top:0;">

    
        <div class="row" style="margin-bottom: 0;">
            <div class="col float-left" style="margin-left: 50px;" >
                <p id="itemsAndQty" style="text-align: left; font-size:22px;">
                    TOTAL ITEMS : <br/>
                    TOTAL QTY : <br/>
                </p>
            </div>
                
            <div class="col float-right" style="text-align: left; margin-left:400px">
                <p style="font-size:22px; margin-bottom:0px;">
                    CR/DR AMNT: 0.00<br/>
                    CR/DR Add<br/>
                    CHARGES   : 0.00 
                </p>
                <div>
                    <p class="float-left" style="margin-top:10px; margin-right:0px; font-size:22px;"> DISCOUNT :</p>
                    <p id="discount" style="margin-left:10px; width:100px;"></p>
                </div>
            </div>

            <div class="col float-right" style="text-align: left;">
                <p id="totals" style="text-align:left; margin-bottom:0px; font-size:22px">
                    SUB TOTAL : <br/>
                    TOTAL SGST : <br/>
                    TOTAL CGST : 
                </p>
                <div>
                    <p class="float-left" style="margin-top:10px; margin-right:0px; font-size:22px;">ROUND OFF :</p>
                    <p id="roundOff" style="margin-left:10px; width:100px;"></p>
                </div>
            </div>
        </div>

        
        <hr style="border-top: 2px dashed #999; margin-top:0;">

        <div class='row align-items-end' style="margin-bottom: 0em;" >
            
            <div class="col float-left">
                <p id="kfcess" class="float-left" style="margin-left: 50px; text-align:left; font-size:22px;">
                    KF.CESS 1% : 
                </p>
            </div>
            
            <div class="col float-right" >
                <p class="float-left" style="width:fit-content; margin-right: 25px; text-align:left; font-weight:bold; font-size:22px;">
                    BILL AMOUNT : 
                </p>
                <p id="finalAmount" class="float-left" style="margin-left:0px; font-weight:bold; font-size:22px;">
                    0.00
                </p>
            </div>
           
        </div>

        <div class="row">
            <div class="col float-left">
                <p id="finalAmountInWords" style="text-align: left; margin-left:50px; font-weight:bold; font-family:Courier New; font-size:22px;">
                Rs.
                </p>
            </div>
        </div>
        
        <hr style="border-top: 2px dashed #999; margin-top:0;">

        <div class='row align-items-end' style="margin-bottom: 0em;" >
            
            <div class="col float-left">
                <p class="float-left" style="margin-left: 50px; text-align:left; font-size:22px;">
                    E & O E<br/>
                    Subject to PERUMBAVOOR Jurisdriction,<br/>
                    Software: https://github.com/fillerink/champion<br/>
                </p>
            </div>
            
            <div class="col float-right" style="text-align: center; font-size:22px;">
                <p>
                    For CHAMPION DISTRIBUTORS<br/>
                     <br/>
                    Authorised Signatory
                </p>
            </div>
           
        </div>


    </div>

    <div class='card mx-auto rounded' style="width: 75%; height:140px; text-align:center; margin:30px; box-shadow: 1em 0em 1em 0.5em #ccc">
        <div class="card-header" style=" text-align:left; background-color:rgb(199, 199, 199);">
            <h4 style="font-weight: bold;">Options</h4>
        </div>
        <button id="createBillButton" class='btn waves-effect waves-light mr-auto' style="margin-top:20px; margin-left:30px; background-color: rgb(0, 0, 126); color:white; font-weight:bold; margin-right:55px;" type="submit">Create New Bill!</button>
    </div>

    <script>
        const path = require('path');
        const electron = require('electron');
        const {app,BrowserWindow} = electron;
        const model = require(path.join(__dirname,'../model.js'));
        window.$ = window.jQuery = require('jquery')

        var ipcRenderer = require('electron').ipcRenderer;

        var data = ipcRenderer.sendSync('send-bill', '');
        console.log(data);
        const billid = data[0];
        const rowStart = data[1];
        const rowEnd = data[2];

        const billList = model.getSalesBills(path.join(__dirname,"../../database/"));
        var currentBill = null;
        for(const i in billList){
            if(billid==billList[i].bill_id){
                currentBill = billList[i];
                break;
            }
          }

        console.log(currentBill);
    </script>
</body>
</html>